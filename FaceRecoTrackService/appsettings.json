{
  "Logging": {
    "LogLevel": {
      "Default": "Information",
      "Microsoft.AspNetCore": "Warning"
    }
  },
  "AllowedHosts": "*",
  "Urls": "http://0.0.0.0:12355",
  "Cors": {
    "AllowedOrigins": []
  },
  "ConnectionStrings": {
    "Postgres": "Host=127.0.0.1;Port=5432;Username=postgres;Password=postgres;Database=facetrack"
  },
  "Qdrant": {
    "Host": "127.0.0.1",
    "Port": 6334,
    "CollectionName": "face_collection",
    "UseHttps": false,
    "ApiKey": "",
    "RecreateOnVectorSizeMismatch": true,
    "Embedded": {
      "Enabled": true,
      "BinPath": "qdrant\\qdrant.exe",
      "WorkingDirectory": "qdrant",
      "Arguments": "",
      "StartupTimeoutSeconds": 15,
      "PortCheckTimeoutMs": 500
    }
  },
  "FaceRecognition": {
    "YoloModelPath": "res/model/yolov8s-face.onnx",
    "FaceNetModelPath": "res/model/ArcFace.onnx",
    "DetectionConfidence": 0.45,
    "IouThreshold": 0.45,
    "FaceExpandRatio": 20,
    "BaseSharpnessThreshold": 15.0,
    "SizeThresholdCoefficient": 0.0002,
    "VectorSize": 512,
    "FeatureInputWidth": 112,
    "FeatureInputHeight": 112,
    "EnableHistogramEqualization": false,
    "OnnxIntraOpNumThreads": 10,
    "OnnxInterOpNumThreads": 5,
    "EnableDebugSaveFaces": true,
    "DebugSaveDir": "snapshots/registrations"
  },
  "Pipeline": {
        "PollIntervalMs": 1000,
        "SnapshotWorkerCount": 10,
        "SnapshotQueueSize": 500,
        "MinFaceCount": 1,
        "TopK": 5,
        "SimilarityThreshold": 0.87,
        "FallbackSimilarityThreshold": 0.78,
        "SnapshotSaveDir": "snapshots",
        "DeleteProcessedSnapshots": true
    },
  "FtpFolder": {
    "Path": "res/ftp",
    "IncludeSubdirectories": true,
    "FilePatterns": [ "*.jpg", "*.jpeg", "*.png" ],
    "DefaultCameraName": "unknown",
    "DefaultLocation": "unknown"
  },
  "PayloadMapping": {
    "PersonIdKey": "person_id",
    "PersonNameKey": "person_name"
  },
  "CameraRoomConfig": {
    "RoomMapping": {}
  }
}
